<script setup>
import { data } from '../../dynamic.data'
</script>

# Зачем Reactive Route?

<br>
<Badge type="warning">{{ data.version }}</Badge>
<Badge type="info">Размер: <span style="color:var(--docsearch-focus-color)">{{ data.size }}</span></Badge>
<Badge type="info">Покрытие: <span style="color:var(--docsearch-focus-color)">{{ data.coverage }}</span> в <span style="color:var(--docsearch-focus-color)">{{ data.passedTests }}</span> тестах</Badge>

Когда в проекте используется реактивная библиотека управления состоянием (на основе сигналов или Proxy), 
интегрировать существующие библиотеки роутинга бывает довольно непросто. Обычно они жестко привязаны 
к UI (например, на основе JSX) или структуре файлов и имеют собственное нереактивное состояние. 
В итоге приходится сталкиваться с проблемами синхронизации двух состояний роутинга (или трех, включая `window.history`).

Также вы можете работать с несколькими проектами на разных стеках (например, в виде микрофронтендов). 
Намного проще иметь одну библиотеку роутинга для всех этих приложений и чувствовать себя "как дома" 
в любом проекте.

Это стало причинами возникновения Reactive Route, который с помощью адаптеров может работать с 
любой реактивной библиотекой и фреймворком для UI-компонентов. Ввиду малого размера и широких
возможностей, он подходит как для небольших проектов (с Solid.js - всего 8 КБ, идеально
для мобильных проектов или лендингов с SSR), так и для крупных приложений.

## Готовые интеграции

В настоящее время Reactive Route предоставляет официальные интеграции для:

- React + [MobX](https://mobx.js.org/)
- React + [Observable](https://observable.ru/)
- Preact (без compat) + MobX
- Preact (без compat) + Observable
- Solid.js + [реактивность Solid.js](https://docs.solidjs.com/concepts/intro-to-reactivity)
- Solid.js + MobX
- Solid.js + Observable
- Vue + [реактивность Vue](https://vuejs.org/guide/extras/reactivity-in-depth)

Ядро открыто для новых интеграций - достаточно передать соответствующие адаптеры и настроить рендеринг.

## Возможности

- **Жизненный цикл**: Встроенные асинхронные методы `beforeEnter` и `beforeLeave` позволяют 
контролировать навигацию, выполнять проверки аутентификации, загружать данные и сохранять в сторы, 
обрабатывать несохраненные изменения, выполнять множественные редиректы.

- **Ленивая загрузка**: Асинхронные импорты (например, `() => import('pages/home')`) позволяют 
загружать JS-чанки только когда пользователь переходит на определенную страницу, улучшая 
производительность приложения.

> Необходимо настроить в бандлере генерацию чанков из асинхронных импортов

- **Модульные экспорты**: Все данные, экспортируемые файлами страниц, доступны в методе `beforeComponentChange`. 
Таким образом можно организовать архитектуру с модульными/постраничными сторами с поддержкой SSR.

- **Серверный рендеринг**: Всего несколько строк кода позволят создавать готовый html на сервере с
опциональной загрузкой данных для каждой страницы и очисткой лишних query параметров.

- **Строгая валидация**: Каждый динамический параметр из URL (например, `/page/:id/:mode`) и 
каждый query параметр должен иметь валидатор, что повышает надежность приложения.

- **Типобезопасность**: Используются современные возможности TypeScript 5 для максимальной статической
валидации и автодополнения. Больше никаких редиректов на нетипизированные строки или ручного поиска 
при рефакторинге. DX кардинально отличается от "абсолютной типобезопасности" популярных библиотек 
роутинга с повсеместными `string | unknown`.

- **Мечта архитектора**: Reactive Route — это отдельный слой, который работает с любым фреймворком 
или вообще без него. Больше никакой логики роутинга, зарытой внутри UI-компонентов и шаблонов. Никакого 
AST-парсинга для поиска маршрутов с частичными строками path, никакого раздутого дерева компонентов. 
Также нет требований к структуре папок или именованию файлов.

- **Оптимизация**: Решение "reactive-first" оптимизирует ререндеринг компонентов и имеет встроенный 
кэш, имитируя поведение nested routes.

- **Стабильность**: Библиотека прошла <span style="color:var(--docsearch-focus-color)">{{ data.passedTests }}</span> 
unit + E2E тестов, которые запускаются в реальных браузерах с использованием Playwright.

## Поддержка браузеров

Reactive Route использует Dual Packaging (CJS и ESM автоматически выбираются исходя из 
конфигурации проекта) для максимальной совместимости.

Ваш бандлер может транспилировать код библиотеки и добавить полифиллы, чтобы поддержать и более
низкие версии браузеров.

| Браузер     | Поддерживаемые версии | Причина ограничений                                                                                                                        |
|:------------|:----------------------|:-------------------------------------------------------------------------------------------------------------------------------------------|
| **Chrome**  | **> 55**              | `async/await` (v55), `URLSearchParams` (v49) [[1]](https://caniuse.com/async-functions) [[2]](https://caniuse.com/mdn-api_urlsearchparams) |
| **Firefox** | **> 52**              | `async/await` (v52), `URLSearchParams` (v44)                                                                                               |
| **Safari**  | **> 10.1**            | `async/await` (v10.1), `URLSearchParams` (v10.1)                                                                                           |
| **Edge**    | **> 17**              | `async/await` (v15), `URLSearchParams` (v17)                                                                                               |
| **Opera**   | **> 42**              | `async/await` (v42), `URLSearchParams` (v36)                                                                                               |
| **IE**      | **Нет**               |                                                                                                                                            |
| **Node.js** | **> 10**              |                                                                                                                                            |

Готовы попробовать? Если вы опытный разработчик, можете сразу перейти 
к [примерам](/ru/examples/react) для вашего стека — использование достаточно простое. 
Или переходите к следующей секции документации для пошаговой настройки.
